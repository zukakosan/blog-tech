---
title: "Azure ADèªè¨¼ã‚’ä½¿ã£ãŸVNETã«å¯¾ã™ã‚‹P2SVPNæ¥ç¶šã‚’æ§‹æˆã™ã‚‹"
emoji: "ğŸ”"
type: "tech"
topics:
  - "azure"
  - "vpn"
  - "azuread"
published: true
published_at: "2022-12-14 10:30"
---

# ãƒ¢ãƒãƒ™
- VNETã¸ã®VPNæ¥ç¶šã«Azure ADèªè¨¼ãŒä½¿ãˆã‚‹ã¨çŸ¥ã£ãŸ
- è©¦ã—ã¦ã¿ãŸã„
- ã»ã¼ã»ã¼ã“ã“ã®æ‰‹é †ã§ã§ããŸ

https://learn.microsoft.com/ja-jp/azure/vpn-gateway/openvpn-azure-ad-tenant

# æ‰‹é †
- VPN Gatewayã¯é©å½“ã«ç”¨æ„ã—ã¦ãŠã

## Azure VPNã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ‰¿èª
- å…¨ä½“ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ã§ç‰¹å®šã®URLã‚’å©ã„ã¦ãƒ†ãƒŠãƒ³ãƒˆã«å¯¾ã—ã¦AzureVPNã‚¢ãƒ—ãƒªã‚’æ‰¿èª

```
https://login.microsoftonline.com/common/oauth2/authorize?client_id=41b23e61-6c1e-4545-b367-cd054e0ed4b4&response_type=code&redirect_uri=https://portal.azure.com&nonce=1234&prompt=admin_consent
```

## ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã®æ§‹æˆ
- VPN Gatewayã«ã¯P2Sæ¥ç¶šã®æ§‹æˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚ã‚‹ã®ã§ãã“ã‹ã‚‰æ§‹æˆ
- Address Poolã«ã¯è‡ªå®…ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ—ãƒ¼ãƒ«ã‚’è¨˜è¿°

![](https://storage.googleapis.com/zenn-user-upload/b5827593cdea-20221214.png)

- èªè¨¼ã®ç¨®é¡ã¨ã—ã¦AzureADã‚’é¸æŠ
- ãã®ä»–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯[Docs](https://learn.microsoft.com/ja-jp/azure/vpn-gateway/openvpn-azure-ad-tenant#enable-authentication)å‚ç…§

## VPNã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- [VPNã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰]ã‹ã‚‰P2SVPNã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- è§£å‡ã—ã¦æ‰‹å…ƒã«ç½®ã„ã¦ãŠã

## AzureVPNã‚¢ãƒ—ãƒªã®è¨­å®š
- Microsoft Storeã‹ã‚‰(AzureVPN)[https://go.microsoft.com/fwlink/?linkid=2117554]ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- å·¦ä¸‹ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€å…ˆã»ã©ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸP2SVPNã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«(azurevpnconfig.xml)ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
![](https://storage.googleapis.com/zenn-user-upload/3d9439cec555-20221214.png)
- Azure ADèªè¨¼ãŒèµ°ã‚‹ã®ã§èªè¨¼ã‚’è¡Œã†
- æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª(è¦‹ãˆã¦ã„ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“ã¨ã‹ã‚‚)

![](https://storage.googleapis.com/zenn-user-upload/c815767e0f5f-20221214.png)

- ã“ã®è¨˜äº‹ã§ã¯ã“ã‚“ãªç’°å¢ƒã«æ¥ç¶šã—ã¦ã„ã‚‹ãŸã‚ã€è¦‹ãˆã¦ã„ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“ãŒä¸Šè¨˜ç”»åƒã®ã‚ˆã†ã«ãªã‚‹

![](https://storage.googleapis.com/zenn-user-upload/74209c706ed2-20221214.png)

- route print

![](https://storage.googleapis.com/zenn-user-upload/d5c2efce1414-20221214.png)

- Private IPã§Azure VMã¸ssh

![](https://storage.googleapis.com/zenn-user-upload/f0f8ac148d21-20221214.png)

# ãŠã‚ã‚Š
Azure ADèªè¨¼ã‚’ä½¿ã£ãŸP2SVPNãŒæ„å¤–ã¨ç°¡å˜ã«ã§ããŸã€‚åˆæœŸæ®µéšã¨ã—ã¦ã¯ã‚ã‚Šã‹ã‚‚ã€‚


