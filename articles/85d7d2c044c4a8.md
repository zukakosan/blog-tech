---
title: "Bicepã§Azureä¸Šã§S2SVPNã‚’ã‚µã‚¯ãƒƒã¨æ§‹ç¯‰ã™ã‚‹"
emoji: "ğŸ’ª"
type: "tech"
topics:
  - "azure"
  - "network"
  - "vpn"
  - "bicep"
published: true
published_at: "2022-12-14 22:30"
publication_name: "microsoft"
---

# ãƒ¢ãƒãƒ™
- S2S VPNã®ç’°å¢ƒã§æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒå¤šã€…ã‚ã‚‹ã®ã§ä½¿ã„ã¾ã‚ã›ã‚‹ã‚ˆã†ã«ä½œã£ã¦ãŠã„ãŸ
- æ¤œè¨¼ç”¨ã§æ®‹ã—ã¦ã„ã‚‹VPN Gatewayã¯å‰²ã‚Šå½“ã¦è§£é™¤ã‚‚ã§ããªã„é‡‘é£Ÿã„è™«

# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
![](https://storage.googleapis.com/zenn-user-upload/66d55c0ae6ae-20221214.png)
ç¶ºéº—ã«æ›¸ãã¨ã“ã‚Œ
![](https://storage.googleapis.com/zenn-user-upload/af614308ae21-20230808.png)

# main.bicep
https://github.com/zukakosan/bicep-network-patterns/blob/main/main.bicep

:::message alert
- NSGã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ«ãƒ¼ãƒ«ã®ã¿ãªã®ã§å¿…è¦ã«å¿œã˜ã¦SSHã‚’é–‹æ”¾ã—ã¦ãã ã•ã„
- VMã®NICã«Public IPã‚’ç”¨æ„ã—ã¦ã„ãªã„ãŸã‚SSHé–‹æ”¾ã¨åˆã‚ã›ã¦å¿…è¦ã«å¿œã˜ã¦ã‚¢ã‚¿ãƒƒãƒã—ã¦ãã ã•ã„
- Ubuntu VMã®ãƒ¦ãƒ¼ã‚¶åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šé©å®œå¤‰æ›´ã—ã¦ãã ã•ã„
	- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†é›¢ã¯æœªå¯¾å¿œ

- VPN Gatewayç”¨ã®Public IPãŒã‚¾ãƒ¼ãƒ³å†—é•·ã®ã‚‚ã®ã«ãªã£ã¦ã—ã¾ã†ãŸã‚(åŸå› æœªç¢ºèª)ã€ãã‚Œã«åˆã‚ã›ã¦VPN Gatewayã‚‚ã‚¾ãƒ¼ãƒ³å¯¾å¿œã®SKUã«ã—ã¦ã„ã¾ã™
:::

ä»Šå¾Œã¯ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«è‰²ã€…ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿç¾ã™ã‚‹bicepã‚’æ ¼ç´äºˆå®š
https://github.com/zukakosan/bicep-network-patterns

# ç–é€šç¢ºèª
- onp ubuntuã«ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPä»˜ä¸

![](https://storage.googleapis.com/zenn-user-upload/36529bd16a1f-20221214.png)
- NSGã«ã¦SSHé–‹æ”¾

![](https://storage.googleapis.com/zenn-user-upload/53fe5d3a4159-20221214.png)
- cloud ubuntuã«ping

![](https://storage.googleapis.com/zenn-user-upload/7727e1ea105b-20221214.png)