---
title: "非推奨：Azure ExpressRoute Circuit折り返しのVNET間接続がどこまでできるのか試す"
emoji: "😊"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---
# モチベ
- Hub-Spoke構成のネットワークにおいて、Spoke間通信を実現するための手段の一つとして、ExpressRouteで折り返すパターンがMicrosoftのドキュメント上にあげられている

https://learn.microsoft.com/ja-jp/azure/architecture/networking/spoke-to-spoke-networking
- 手段の一つとして挙げている一方で、"非推奨"であることが悉く強調されているのですが…(笑)
> ExpressRoute. In certain configurations, an ExpressRoute gateway can advertise routes that attract spoke-to-spoke communication, sending traffic to the Microsoft edge router, where it's routed to the destination spoke. Microsoft **strongly discourages** this scenario because **it introduces latency by sending traffic to the Microsoft backbone edge and back**. On top of that, Microsoft does not recommend this approach, **due to the single point of failure and the large blast radius**. This scenario also presents multiple problems caused by putting extra pressure on the ExpressRoute infrastructure (the gateway and physical routers). **This additional pressure can cause packet drops**.

- とはいえ、ExpressRouteの性質の検証の一つとしてここで試しておく

# 用意する環境
以下のような、ExpressRouteを共有するマルチHub-Spoke環境を準備

