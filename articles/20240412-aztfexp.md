---
title: "Azure Export for Terraform で既存の Azure 環境を Terraform にエクスポートする"
emoji: "📝"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ['terraform','azure','iac','microsoft']
published: false
publication_name: "microsoft"
---

# はじめに
Azure の既存リソースは、[テンプレートのエクスポート] メニューから ARM テンプレートの形でダウンロードすることができます。
テンプレートと言いつつそのまま流用できるわけではないので、転用する場合には編集が必要なのですが、エクスポート自体はできます。
ふと、Terraform でエクスポートするツールはないのか探していたら、Azure Export for Terraform[^1] というツールを見つけたので試してみます。
[^1]:https://learn.microsoft.com/ja-jp/azure/developer/terraform/azure-export-for-terraform/export-terraform-overview

# Azure Export for Terraform
このツールはこちらの GitHub リポジトリ[^2] で公開されています。
環境に合わせてインストールします。
[^2]:https://github.com/Azure/aztfexport/releases

## 使用方法
Terraform コードとしてエクスポートする範囲を「リソースグループ/リソース/リソースグラフのクエリ結果」から選択できます。
シンプルなのはリソースグループ単位でしょう。この場合、次のように記述します。
```
aztfexport resource-group myResourceGroup
```

# 自前の環境に適用してみる
ハンズオン用に作っていた VNet に VM がいるだけのシンプルなリソースグループがあったので、そのリソースグループから Terraform を作成してみます。
![](/images/20240412-aztfexp/rg.png)

# おわりに
