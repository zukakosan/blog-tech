---
title: "Azure VM ã«ãŠã‘ã‚‹ OS å´ã§ã®é–‹æ”¾ãƒãƒ¼ãƒˆã¨ãã®ç¢ºèª (Nmap)"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# ã“ã‚Œã¯ä½•...?
æ™®æ®µã€NSG ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶å¾¡ã‚’ã—ã¦ã„ã‚‹ã¨ã‚ã¾ã‚Šæ„è­˜ã—ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€Windows/Linux ã¨ã‚‚ã« OS å´ã«ã‚‚ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã‚’æŒã£ã¦ãŠã‚Šã€NSG ã§è¨±å¯ã—ã¦ã„ã‚‹ã®ã«åˆ°é”ã§ããªã„ã¿ãŸã„ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã®è¾ºã®æŒ™å‹•ã‚’ Nmap ã‚’ä½¿ã£ã¦ç¢ºèªã—ã¾ã™ã€‚

# Nmap ã¨ã¯
Wiki(*1)ã«ã‚ˆã‚Œã°ä»¥ä¸‹ã‚‰ã—ã„ã§ã™ã€‚

> nmapã¯Gordon Lyonã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒŠã§ã‚ã‚‹ã€‚ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³æ©Ÿèƒ½ã ã‘ã§ãªãã€OSã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¤œå‡ºæ©Ÿèƒ½ã€ã‚µãƒ¼ãƒ“ã‚¹ãŠã‚ˆã³ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ¤œå‡ºæ©Ÿèƒ½ãªã©ã€å¤šãã®æ©Ÿèƒ½ã‚’å…¼ã­å‚™ãˆã¦ã„ã‚‹

ä»Šå›ã¯ Ubuntu ã¨ Windows Server ã‚’ç«‹ã¦ã¦ã€Nmap ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚ã“ã‚Œã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(*2)ã™ã‚Œã° Windows ã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚Ubuntu ã®å ´åˆã¯ `sudo apt  install nmap` ã§ã™ãã«å…¥ã‚Šã¾ã™ã€‚ãã®ã†ãˆã§å„ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ localhost ã«å¯¾ã—ã¦ ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’ã‹ã‘ã¾ã™ã€‚VM ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ Marketplace ã®çœŸã£æ–°ãªçŠ¶æ…‹ã§ã™ã€‚çµæœã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

Linux (ubuntu 20.04)
```
vm-ubuntu:~$ nmap localhost
Starting Nmap 7.80 ( https://nmap.org ) at 2023-11-08 08:20 UTC
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00018s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.07 seconds
```
æ—¢å®šã§ 22/tcp ãŒé–‹ã„ã¦ã„ã¾ã™ã­ã€‚

Windows (Windows Server 2022 Datacenter Azure Edition)
```
C:\Users\xxxx>nmap localhost
Starting Nmap 7.94 ( https://nmap.org ) at 2023-11-08 08:32 Coordinated Universal Time
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00019s latency).
Other addresses for localhost (not scanned): ::1
Not shown: 997 closed tcp ports (reset)
PORT     STATE SERVICE
135/tcp  open  msrpc
445/tcp  open  microsoft-ds
3389/tcp open  ms-wbt-server

Nmap done: 1 IP address (1 host up) scanned in 0.26 seconds
```
æ—¢å®šã§ã€135/tcpã€445/tcpã€3389/tcpã€ãŒé–‹æ”¾ã•ã‚Œã¦ã„ã¾ã™ã€‚

::: message 
## Column: Apache ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®æŒ™å‹• 
Ubuntu ã«ãŠã„ã¦ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ 22/tcp ã—ã‹é–‹ã„ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆãªã„ã‘ã© Apache ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦æ¤œè¨¼ã™ã‚‹éš›ã«ã‚ã–ã‚ã– OS å´ã§é–‹æ”¾ã—ãŸè¨˜æ†¶ãŒãªã„ã¨æ€ã£ãŸã®ã§ã€Apache ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰å¾Œã§ã®ãƒãƒ¼ãƒˆé–‹æ”¾çŠ¶æ³ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚ç’°å¢ƒã¯ Ubunt 20.04 ã§ã™ã€‚

```
AzureAdmin@vm-ubuntu:~$ nmap localhost
Starting Nmap 7.80 ( https://nmap.org ) at 2023-11-08 08:20 UTC
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00018s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
 
Nmap done: 1 IP address (1 host up) scanned in 0.07 seconds
AzureAdmin@vm-ubuntu:~$ sudo apt install apache2
Reading package lists... Done
Building dependency tree
Reading state information... Done
<ç•¥>

AzureAdmin@vm-ubuntu:~$ nmap localhost
Starting Nmap 7.80 (
https://nmap.org
) at 2023-11-08 08:21 UTC
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00018s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http
 
Nmap done: 1 IP address (1 host up) scanned in 0.07 seconds
```
Apach ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å¾Œã« `80/tcp open  http` ãŒè¿½åŠ ã•ã‚Œã„ã‚‹

:::

# NSG è¶Šã—ã®é€šä¿¡ã«ã¤ã„ã¦
Public IP è¶Šã—ã«

::: message
## Column: Basic Public IP ã«ãŠã‘ã‚‹ ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³
::: 

# Reference
- (*1) nmapã®Wikipedia
https://ja.wikipedia.org/wiki/Nmap

- (*2) Windows ã§ Nmap ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒˆã‚¹ã‚­ãƒ£ãƒ³ã«ãƒˆãƒ©ã‚¤
https://qiita.com/san_bay3/items/705e630ec6b02fdc3bc2

