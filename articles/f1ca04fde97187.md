---
title: "Azure VM における OS 側での開放ポートとその確認 (Nmap)"
emoji: "🐷"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# これは何...?
普段、NSG でネットワーク制御をしているとあまり意識しないかもしれませんが、Windows/Linux ともに OS 側にもファイアウォールを持っており、NSG で許可しているのに到達できないみたいなこともあります。この辺の挙動を Nmap を使って確認します。

#
これはインストール*1すれば Windows でも利用できます



参考としてWindows (Windows Server 2022 Azure Edition x64) の場合

```
C:\Users\KokiIshizuka>nmap localhost
Starting Nmap 7.94 ( https://nmap.org ) at 2023-11-08 08:32 Coordinated Universal Time
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00019s latency).
Other addresses for localhost (not scanned): ::1
Not shown: 997 closed tcp ports (reset)
PORT     STATE SERVICE
135/tcp  open  msrpc
445/tcp  open  microsoft-ds
3389/tcp open  ms-wbt-server

Nmap done: 1 IP address (1 host up) scanned in 0.26 seconds
```

参考として Ubuntu の場合

::: message 
## Column: Apache インストール時の挙動 
Ubuntu において デフォルトでは 22/tcp しか開いているように見えないけど Apache をインストールして検証する際にわざわざ OS 側で開放した記憶がないと思ったので、Apache インストール前後でのポート開放状況を見てみます。環境は Ubunt 20.04 です。
:::

# NSG 越しの通信について
Public IP 越しに

::: message
## Column: Basic Public IP における ポートスキャン
::: 

# Reference
- Windows で Nmap を使ってポートスキャンにトライ
https://qiita.com/san_bay3/items/705e630ec6b02fdc3bc2

