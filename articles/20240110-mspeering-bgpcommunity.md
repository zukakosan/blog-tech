---
title: "ExpressRoute Microsoft Peering „ÅßÊµÅ„Çå„Å¶„Åè„Çã„Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„Å®„Çµ„Éº„Éì„Çπ„ÅÆÂØæÂøú„ÇíÂèñÂæó„Åô„Çã"
emoji: "üöÑ"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["azure","microsoft","expressroute","bgp"]
published: true
publication_name: "microsoft"

---
# „ÅØ„Åò„ÇÅ„Å´
Azure „Åß ExpressRoute „ÅÆ Microsoft Peering „ÇíÂà©Áî®„Åô„ÇãÂ†¥Âêà„ÄÅMicrosoft 365 „ÇÑ Azure PaaS „Å™„Å©„ÅÆ„Éë„Éñ„É™„ÉÉ„ÇØ IP „Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„Åå„Ç™„É≥„Éó„É¨„Éü„ÇπÂÅ¥„ÅÆ„É´„Éº„Çø„Éº„Å´Â∫ÉÂ†±„Åï„Çå„Å¶„Åç„Åæ„Åô„ÄÇ„ÅÇ„Åè„Åæ„Åß IP „Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„Å®„Åó„Å¶„Åó„ÅãË¶ã„Åà„Å™„ÅÑ„ÅÆ„Åß„ÄÅ„Åù„ÅÆ„Ç¢„Éâ„É¨„Çπ„Åå‰Ωï„ÅÆ„Çµ„Éº„Éì„Çπ„Å´Âà©Áî®„Åï„Çå„Å¶„ÅÑ„Çã„Ç¢„Éâ„É¨„Çπ„Å™„ÅÆ„Åã„Åæ„Åß„ÅØÂàÜ„Åã„Çä„Åæ„Åõ„Çì„ÄÇ‰∏çË¶Å„Å™„Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„ÇíÂèñÂæó„Åó„Å¶„ÅÑ„Çã„Å®„ÄÅÊúõ„Åæ„Å™„ÅÑÈÄö‰ø°„Åå Microsoft Peering „ÇíÈÄö„Çã„Åì„Å®„Å´„Å™„Çã„Åü„ÇÅÂ∏ØÂüü„ÅÆ„Å≤„Å£Ëø´„ÇÑ„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„ÇπË¶Å‰ª∂„ÅÆÂïèÈ°åÁ≠â„Å´Ë©≤ÂΩì„Åó„Å¶„Åó„Åæ„ÅÜ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ

# „Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„Å®„Çµ„Éº„Éì„Çπ„ÅÆÂØæÂøú„ÇíÂèñÂæó„Åô„Çã
„Å±„Å£„Å®ÊÄù„ÅÑ„Å§„Åè„ÅÆ„Åå„Åì„Å°„Çâ„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„Åß„ÅØ„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„Åã[^1]„ÄÇ„Åì„ÅÆ„Çµ„Ç§„Éà„Åß„ÅÆÂÖ¨ÈñãÊÉÖÂ†±„ÅØ„ÄÅÂà©Áî®„Åô„ÇãÂèØËÉΩÊÄß„ÅÆ„ÅÇ„Çã„Ç¢„Éâ„É¨„ÇπÂ∏Ø„Çí„Åô„Åπ„Å¶Ë®òËºâ„Çí„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åß„Åô„Åå„ÄÅÂÆüÈöõ„Å´Âà©Áî®„Åó„Å¶„ÅÑ„Çã„Ç¢„Éâ„É¨„ÇπÂ∏Ø„ÅØ ExpressRoute „ÅßÂ∫ÉÂ†±„Åï„Çå„Å¶„Åè„Çã„Åü„ÇÅ„ÄÅCIDR ÂΩ¢ÂºèÁöÑ„Å´ÂÆåÂÖ®„Å´‰∏ÄËá¥„Åô„Çã„Å®„ÅØÈôê„Çä„Åæ„Åõ„Çì„ÄÇ„Åæ„Åü„ÄÅ„Åù„ÇÇ„Åù„ÇÇ„Åì„Å°„Çâ„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„Åß„ÅØ Azure „Çµ„Éº„Éì„Çπ„Å´„Å§„ÅÑ„Å¶„ÅØËß¶„Çå„Çâ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
[^1]: https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/urls-and-ip-address-ranges?view=o365-worldwide

:::message

„Å°„Å™„Åø„Å´„ÄÅ„É´„Éº„Éà„Éï„Ç£„É´„Çø„Éº„Åß `Azure Active Directory` „ÇíÂ∫ÉÂ†±„Åô„Çã„Å®„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÁµåË∑Ø„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åô„ÄÇ

```json
{
	"communityName": "Azure Active Directory",
	"communityPrefixes": [
		"40.126.0.0/19",
		"40.126.32.0/19",
		"20.190.128.0/19",
		"20.190.160.0/19"
	],
	"communityValue": "12076:5060",
	"isAuthorizedToUse": true,
	"serviceGroup": "Azure",
	"serviceSupportedRegion": "Global"
}
```

‰∏ÄÊñπ„ÄÅ`Other Office 365 Services` „Åß„ÅØ„ÄÅ`20.190.128.0/18`„Å® `40.126.0.0/18` „Å´„Åæ„Å®„ÇÅ„Çâ„Çå„Å¶Â∫ÉÂ†±„Åï„Çå„Åæ„Åô„ÄÇ
```json
{
	"communityName": "Other Office 365 Services",
	"communityPrefixes": [
		"13.107.6.171/32",
		"13.107.6.192/32",
		"13.107.9.192/32",
		"13.107.18.15/32",
		"13.107.140.6/32",
		"20.20.32.0/19",
		"20.190.128.0/18",
		"20.231.128.0/19",
		"40.126.0.0/18",
		"52.108.0.0/14",
		"52.244.37.168/32"
	],
	"communityValue": "12076:5100",
	"isAuthorizedToUse": false,
	"serviceGroup": "O365",
	"serviceSupportedRegion": "Global"
}
```
:::

„Åß„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´ÂØæÂøú„ÇíÂèñÂæó„Åô„Çã„Åã„Å®„ÅÑ„ÅÜ„Å®„ÄÅPowerShell „Ç≥„Éû„É≥„Éâ„É¨„ÉÉ„Éà„ÇÇ„Åó„Åè„ÅØ Azure CLI „ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÂà©Áî®„Åó„Åæ„Åô„ÄÇ ÂÆü„ÅØ„Åì„Å°„Çâ„ÅÆ„É´„Éº„Éà„Éï„Ç£„É´„Çø„Éº„Å´Èñ¢„Åô„Çã„Éâ„Ç≠„É•„É°„É≥„Éà[^2] „Å´„Åó„Çå„Å£„Å®Ë®òËºâ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
[^2]: https://learn.microsoft.com/ja-jp/azure/expressroute/how-to-routefilter-cli#prefixes

Azure PowerShell „Åß„ÅØ `Get-AzBgpServiceCommunity`[^3] „Ç≥„Éû„É≥„Éâ„É¨„ÉÉ„Éà„ÇíÂà©Áî®„Åó„ÄÅAzure CLI „Åß„ÅØ `az network route-filter rule list-service-communities`[^4] „ÇíÂà©Áî®„Åó„Åæ„Åô„ÄÇÂæåËÄÖ„Å´„Å§„ÅÑ„Å¶„ÅØ„Åæ„Å†„Éó„É¨„Éì„É•„Éº‰∏≠„ÅÆ„Çà„ÅÜ„Åß„Åô„ÄÇ
[^3]: https://learn.microsoft.com/ja-jp/powershell/module/az.network/get-azbgpservicecommunity?view=azps-10.4.1
[^4]: https://learn.microsoft.com/ja-jp/cli/azure/network/route-filter/rule?view=azure-cli-latest#az-network-route-filter-rule-list-service-communities

Azure PowerShell „ÅÆÊñπ„ÅØÂá∫Âäõ„ÅåÂ∞ë„ÅóÊâ±„ÅÑ„Å•„Çâ„Åã„Å£„Åü„Åü„ÇÅ„ÄÅAzure CLI „ÅÆÊñπ„ÇíË©¶„Åó„Åæ„Åó„Åü„ÄÇ‰ª•‰∏ã„ÇíÂÆüË°å„Åó„Å¶„Éï„Ç°„Ç§„É´„Å´Âá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ

```bash
$ route=$(az network route-filter rule list-service-communities)
$ echo $route > route.json
```

‰ΩúÊàê„Åï„Çå„Åü„Éï„Ç°„Ç§„É´„ÅÆ‰∏≠„Å´„ÄÅ„Åö„Çâ„Éº„Å£„Å®„É´„Éº„Éà„Éï„Ç£„É´„Çø„Éº„ÅßË®≠ÂÆö„Åô„Çã `communityName`„ÄÅ`communityPrefixes`„ÄÅ`communityValue` „Å®„ÅÑ„Å£„ÅüÊÉÖÂ†±„ÅåË®òËºâ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```json
[
	{
		"bgpCommunities": [
			{
				"communityName": "Exchange",
				"communityPrefixes": [
					"13.107.6.152/31",
					"13.107.18.10/31",
					"13.107.128.0/22",
					"23.103.160.0/20",
					"40.92.0.0/15",
					"40.96.0.0/13",
					"40.104.0.0/15",
					"40.107.0.0/16",
					"52.96.0.0/14",
					"52.100.0.0/14",
					"52.238.78.88/32",
					"104.47.0.0/17",
					"131.253.33.215/32",
					"132.245.0.0/16",
					"150.171.32.0/22",
					"204.79.197.215/32",
					"13.107.128.0/24",
					"13.107.129.0/24",
					"150.171.32.0/24",
					"150.171.34.0/24",
					"150.171.35.0/24",
					"52.96.38.0/24"
				],
				"communityValue": "12076:5010",
				"isAuthorizedToUse": false,
				"serviceGroup": "O365",
				"serviceSupportedRegion": "Global"
			},
			{
				"communityName": "Exchange IPv6",
				"communityPrefixes": [
					"2603:1006::/40",
					"2603:1016::/36",
					"2603:1026::/36",
					"2603:1036::/36",
					"2603:1046::/36",
					"2603:1056::/36",
					"2620:1ec:4::152/128",
					"2620:1ec:4::153/128",
					"2620:1ec:c::10/128",
					"2620:1ec:c::11/128",
					"2620:1ec:d::10/128",
					"2620:1ec:d::11/128",
					"2620:1ec:8f0::/46",
					"2620:1ec:900::/46",
					"2620:1ec:a92::152/128",
					"2620:1ec:a92::153/128",
					"2a01:111:f400::/48",
					"2a01:111:f403::/48"
				],
				"communityValue": "12076:5010",
				"isAuthorizedToUse": false,
				"serviceGroup": "O365",
				"serviceSupportedRegion": "Global"
			}
		],
		"id": "/subscriptions//resourceGroups//providers/Microsoft.Network/bgpServiceCommunities/Exchange",
		"name": "Exchange",
		"resourceGroup": "",
		"serviceName": "Exchange",
		"type": "Microsoft.Network/bgpServiceCommunities"
	},
	{
		"bgpCommunities": [
			{
				"communityName": "Other Office 365 Services",
				"communityPrefixes": [
					"13.107.6.171/32",
					"13.107.6.192/32",
					"13.107.9.192/32",
					"13.107.18.15/32",
					"13.107.140.6/32",
					"20.20.32.0/19",
					"20.190.128.0/18",
					"20.231.128.0/19",
					"40.126.0.0/18",
					"52.108.0.0/14",
					"52.244.37.168/32"
				],
				"communityValue": "12076:5100",
				"isAuthorizedToUse": false,
				"serviceGroup": "O365",
				"serviceSupportedRegion": "Global"
			},
			{
				"communityName": "Other Office 365 Services IPv6",
				"communityPrefixes": [
					"2603:1006:1400::/40",
					"2603:1006:2000::/48",
					"2603:1007:200::/48",
					"2603:1016:1400::/48",
					"2603:1016:2400::/40",
					"2603:1017::/48",
					"2603:1026:2400::/40",
					"2603:1026:3000::/48",
					"2603:1027:1::/48",
					"2603:1036:2400::/40",
					"2603:1036:3000::/48",
					"2603:1037:1::/48",
					"2603:1046:1400::/40",
					"2603:1046:2000::/48",
					"2603:1047:1::/48",
					"2603:1056:1400::/40",
					"2603:1056:2000::/48",
					"2603:1057:2::/48",
					"2603:1063:2000::/38",
					"2620:1ec:4::192/128",
					"2620:1ec:c::15/128",
					"2620:1ec:8fc::6/128",
					"2620:1ec:a92::171/128",
					"2620:1ec:a92::192/128",
					"2a01:111:f100:2000::a83e:3019/128",
					"2a01:111:f100:2002::8975:2d79/128",
					"2a01:111:f100:2002::8975:2da8/128",
					"2a01:111:f100:7000::6fdd:6cd5/128",
					"2a01:111:f100:a004::bfeb:88cf/128"
				],
				"communityValue": "12076:5100",
				"isAuthorizedToUse": false,
				"serviceGroup": "O365",
				"serviceSupportedRegion": "Global"
			}
		],
		"id": "/subscriptions//resourceGroups//providers/Microsoft.Network/bgpServiceCommunities/OtherOffice365Services",
		"name": "OtherOffice365Services",
		"resourceGroup": "",
		"serviceName": "OtherOffice365Services",
		"type": "Microsoft.Network/bgpServiceCommunities"
	},
	...(‰∏≠Áï•)

				{
				"communityName": "Azure SIP Trunking IPv6",
				"communityPrefixes": [],
				"communityValue": "12076:5250",
				"isAuthorizedToUse": true,
				"serviceGroup": "AzureSIPTrunking",
				"serviceSupportedRegion": "Global"
			}
		],
		"id": "/subscriptions//resourceGroups//providers/Microsoft.Network/bgpServiceCommunities/AzureSIPTrunking",
		"name": "AzureSIPTrunking",
		"resourceGroup": "",
		"serviceName": "AzureSIPTrunking",
		"type": "Microsoft.Network/bgpServiceCommunities"
	}
]
```

# „Åæ„Å®„ÇÅ
„Ç™„É≥„Éó„É¨„Éü„ÇπÂÅ¥„Å´Â∫ÉÂ†±„Åï„Çå„Å¶„Åè„Çã„Ç¢„Éâ„É¨„Çπ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ„ÅÆÊãõÂæÖ„ÇíÁ¢∫„Åã„ÇÅ„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ`Get-AzBgpServiceCommunity` „Ç≥„Éû„É≥„Éâ„É¨„ÉÉ„Éà„ÇÑ `az network route-filter rule list-service-communities` „Ç≥„Éû„É≥„Éâ„ÇíÂà©Áî®„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ